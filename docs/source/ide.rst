IDE и симулятор
===============

В данном разделе описана настольная IDE, входящая в поставку прошивки.
Инструмент предназначен для проверки траекторий без аппаратуры и
использует те же модули планировщика, TinyML-оптимизатора и визуализатора,
что и основная система.

Формат проекта
--------------

Файлы проектов имеют расширение ``.cncp`` и состоят из простых директив::

   NAME Demo Workspace
   TYPE BSPLINE3
   PERIOD_MS 1.0
   LIMITS 180.0 950.0 4000.0
   WAYPOINT 0.0 0.0 -20.0

Каждая директива соответствует полям структуры :c:type:`ide_project`. Все
значения автоматически конвертируются в фиксированную точку Q16.16.

Генерация плана
---------------

При загрузке проекта вызывается :c:func:`ide_project_generate`, которая
выполняет следующие шаги:

#. Построение сплайна по контрольным точкам с помощью
   :c:func:`spl_make_from_waypoints`.
#. Применение TinyML-оптимизатора для корректировки ограничений
   скорости/ускорения в зависимости от кривизны.
#. Временная параметризация методом Шина–Маккея через
   :c:func:`spl_time_scale`.

Экспорт артефактов
------------------

Команда ``cnc_ide <project.cncp> <output_dir>`` создаёт следующий набор
файлов:

* ``*_ui.ppm`` – изображение конфигуратора.
* ``*_ui.json`` – экспорт настроек.
* ``*_traj.obj`` – 3D-модель траектории.
* ``*_traj.ppm`` – рендер траектории.
* ``*_report.txt`` – сводная информация о длительности и ограничениях.

Полученные данные можно загружать в внешний вьювер или использовать в
офлайн-демонстрациях. Все функции доступны и из тестов хоста, что
позволяет автоматически проверять целостность IDE при CI-сборке.
